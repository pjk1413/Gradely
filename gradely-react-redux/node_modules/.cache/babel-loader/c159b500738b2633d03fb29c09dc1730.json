{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"The filter conditions have been applied properly, but couldn\\u2019t be displayed visually. \\n        The overall amount of conditions exceed the capability of the dropdown menu. \\n        For more details see the documentation.\"], [\"The filter conditions have been applied properly, but couldn\\u2019t be displayed visually.\\\\x20\\n        The overall amount of conditions exceed the capability of the dropdown menu.\\\\x20\\n        For more details see the documentation.\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport BasePlugin from '../_base';\nimport { arrayEach, arrayMap } from '../../helpers/array';\nimport { toSingleLine } from '../../helpers/templateLiteralTag';\nimport { warn } from '../../helpers/console';\nimport { rangeEach } from '../../helpers/number';\nimport EventManager from '../../eventManager';\nimport { addClass, removeClass, closest } from '../../helpers/dom/element';\nimport { registerPlugin } from '../../plugins';\nimport { SEPARATOR } from '../contextMenu/predefinedItems';\nimport * as constants from '../../i18n/constants';\nimport ConditionComponent from './component/condition';\nimport OperatorsComponent from './component/operators';\nimport ValueComponent from './component/value';\nimport ActionBarComponent from './component/actionBar';\nimport ConditionCollection from './conditionCollection';\nimport DataFilter from './dataFilter';\nimport ConditionUpdateObserver from './conditionUpdateObserver';\nimport { createArrayAssertion, toEmptyString, unifyColumnValues } from './utils';\nimport { CONDITION_NONE, CONDITION_BY_VALUE, OPERATION_AND, OPERATION_OR, OPERATION_OR_THEN_VARIABLE } from './constants';\n/**\n * @plugin Filters\n * @dependencies DropdownMenu TrimRows HiddenRows\n *\n * @description\n * The plugin allows filtering the table data either by the built-in component or with the API.\n *\n * See [the filtering demo](https://docs.handsontable.com/pro/demo-filtering.html) for examples.\n *\n * @example\n * ```\n * const container = document.getElementById('example');\n * const hot = new Handsontable(container, {\n *   data: getData(),\n *   colHeaders: true,\n *   rowHeaders: true,\n *   dropdownMenu: true,\n *   filters: true\n * });\n * ```\n */\n\nvar Filters = /*#__PURE__*/function (_BasePlugin) {\n  _inherits(Filters, _BasePlugin);\n\n  function Filters(hotInstance) {\n    var _this;\n\n    _classCallCheck(this, Filters);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Filters).call(this, hotInstance));\n    /**\n     * Instance of {@link EventManager}.\n     *\n     * @private\n     * @type {EventManager}\n     */\n\n    _this.eventManager = new EventManager(_assertThisInitialized(_this));\n    /**\n     * Instance of {@link TrimRows}.\n     *\n     * @private\n     * @type {TrimRows}\n     */\n\n    _this.trimRowsPlugin = null;\n    /**\n     * Instance of {@link DropdownMenu}.\n     *\n     * @private\n     * @type {DropdownMenu}\n     */\n\n    _this.dropdownMenuPlugin = null;\n    /**\n     * Instance of {@link ConditionCollection}.\n     *\n     * @private\n     * @type {ConditionCollection}\n     */\n\n    _this.conditionCollection = null;\n    /**\n     * Instance of {@link ConditionUpdateObserver}.\n     *\n     * @private\n     * @type {ConditionUpdateObserver}\n     */\n\n    _this.conditionUpdateObserver = null;\n    /**\n     * Map, where key is component identifier and value represent `BaseComponent` element or it derivatives.\n     *\n     * @private\n     * @type {Map}\n     */\n\n    _this.components = new Map([['filter_by_condition', null], ['filter_operators', null], ['filter_by_condition2', null], ['filter_by_value', null], ['filter_action_bar', null]]);\n    /**\n     * Object containing information about last selected column physical and visual index for added filter conditions.\n     *\n     * @private\n     * @type {Object}\n     * @default null\n     */\n\n    _this.lastSelectedColumn = null;\n    /**\n     * Hidden menu rows indexed by physical column index\n     *\n     * @private\n     * @type {Map}\n     */\n\n    _this.hiddenRowsCache = new Map(); // One listener for the enable/disable functionality\n\n    _this.hot.addHook('afterGetColHeader', function (col, TH) {\n      return _this.onAfterGetColHeader(col, TH);\n    });\n\n    return _this;\n  }\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` than the {@link Filters#enablePlugin} method is called.\n   *\n   * @returns {Boolean}\n   */\n\n\n  _createClass(Filters, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      /* eslint-disable no-unneeded-ternary */\n      return this.hot.getSettings().filters ? true : false;\n    }\n    /**\n     * Enables the plugin functionality for this Handsontable instance.\n     */\n\n  }, {\n    key: \"enablePlugin\",\n    value: function enablePlugin() {\n      var _this2 = this;\n\n      if (this.enabled) {\n        return;\n      }\n\n      this.trimRowsPlugin = this.hot.getPlugin('trimRows');\n      this.dropdownMenuPlugin = this.hot.getPlugin('dropdownMenu');\n      var dropdownSettings = this.hot.getSettings().dropdownMenu;\n      var menuContainer = dropdownSettings && dropdownSettings.uiContainer || this.hot.rootDocument.body;\n\n      var addConfirmationHooks = function addConfirmationHooks(component) {\n        component.addLocalHook('accept', function () {\n          return _this2.onActionBarSubmit('accept');\n        });\n        component.addLocalHook('cancel', function () {\n          return _this2.onActionBarSubmit('cancel');\n        });\n        component.addLocalHook('change', function (command) {\n          return _this2.onComponentChange(component, command);\n        });\n        return component;\n      };\n\n      var filterByConditionLabel = function filterByConditionLabel() {\n        return \"\".concat(_this2.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_CONDITION), \":\");\n      };\n\n      var filterValueLabel = function filterValueLabel() {\n        return \"\".concat(_this2.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_VALUE), \":\");\n      };\n\n      if (!this.components.get('filter_by_condition')) {\n        var conditionComponent = new ConditionComponent(this.hot, {\n          id: 'filter_by_condition',\n          name: filterByConditionLabel,\n          addSeparator: false,\n          menuContainer: menuContainer\n        });\n        conditionComponent.addLocalHook('afterClose', function () {\n          return _this2.onSelectUIClosed();\n        });\n        this.components.set('filter_by_condition', addConfirmationHooks(conditionComponent));\n      }\n\n      if (!this.components.get('filter_operators')) {\n        this.components.set('filter_operators', new OperatorsComponent(this.hot, {\n          id: 'filter_operators',\n          name: 'Operators'\n        }));\n      }\n\n      if (!this.components.get('filter_by_condition2')) {\n        var _conditionComponent = new ConditionComponent(this.hot, {\n          id: 'filter_by_condition2',\n          name: '',\n          addSeparator: true,\n          menuContainer: menuContainer\n        });\n\n        _conditionComponent.addLocalHook('afterClose', function () {\n          return _this2.onSelectUIClosed();\n        });\n\n        this.components.set('filter_by_condition2', addConfirmationHooks(_conditionComponent));\n      }\n\n      if (!this.components.get('filter_by_value')) {\n        this.components.set('filter_by_value', addConfirmationHooks(new ValueComponent(this.hot, {\n          id: 'filter_by_value',\n          name: filterValueLabel\n        })));\n      }\n\n      if (!this.components.get('filter_action_bar')) {\n        this.components.set('filter_action_bar', addConfirmationHooks(new ActionBarComponent(this.hot, {\n          id: 'filter_action_bar',\n          name: 'Action bar'\n        })));\n      }\n\n      if (!this.conditionCollection) {\n        this.conditionCollection = new ConditionCollection();\n      }\n\n      if (!this.conditionUpdateObserver) {\n        this.conditionUpdateObserver = new ConditionUpdateObserver(this.conditionCollection, function (column) {\n          return _this2.getDataMapAtColumn(column);\n        });\n        this.conditionUpdateObserver.addLocalHook('update', function (conditionState) {\n          return _this2.updateComponents(conditionState);\n        });\n      }\n\n      this.components.forEach(function (component) {\n        component.show();\n      });\n      this.registerEvents();\n      this.addHook('beforeDropdownMenuSetItems', function (items) {\n        return _this2.onBeforeDropdownMenuSetItems(items);\n      });\n      this.addHook('afterDropdownMenuDefaultOptions', function (defaultOptions) {\n        return _this2.onAfterDropdownMenuDefaultOptions(defaultOptions);\n      });\n      this.addHook('afterDropdownMenuShow', function () {\n        return _this2.onAfterDropdownMenuShow();\n      });\n      this.addHook('afterDropdownMenuHide', function () {\n        return _this2.onAfterDropdownMenuHide();\n      });\n      this.addHook('afterChange', function (changes) {\n        return _this2.onAfterChange(changes);\n      }); // force to enable dependent plugins\n\n      this.hot.getSettings().trimRows = true;\n      this.trimRowsPlugin.enablePlugin(); // Temp. solution (extending menu items bug in contextMenu/dropdownMenu)\n\n      if (this.hot.getSettings().dropdownMenu) {\n        this.dropdownMenuPlugin.disablePlugin();\n        this.dropdownMenuPlugin.enablePlugin();\n      }\n\n      _get(_getPrototypeOf(Filters.prototype), \"enablePlugin\", this).call(this);\n    }\n    /**\n     * Registers the DOM listeners.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this3 = this;\n\n      this.eventManager.addEventListener(this.hot.rootElement, 'click', function (event) {\n        return _this3.onTableClick(event);\n      });\n    }\n    /**\n     * Disables the plugin functionality for this Handsontable instance.\n     */\n\n  }, {\n    key: \"disablePlugin\",\n    value: function disablePlugin() {\n      if (this.enabled) {\n        if (this.dropdownMenuPlugin.enabled) {\n          this.dropdownMenuPlugin.menu.clearLocalHooks();\n        }\n\n        this.components.forEach(function (component) {\n          component.hide();\n        });\n        this.conditionCollection.clean();\n        this.trimRowsPlugin.untrimAll();\n      }\n\n      _get(_getPrototypeOf(Filters.prototype), \"disablePlugin\", this).call(this);\n    }\n    /**\n     * @description\n     * Adds condition to the conditions collection at specified column index.\n     *\n     * Possible predefined conditions:\n     *  * `begins_with` - Begins with\n     *  * `between` - Between\n     *  * `by_value` - By value\n     *  * `contains` - Contains\n     *  * `empty` - Empty\n     *  * `ends_with` - Ends with\n     *  * `eq` - Equal\n     *  * `gt` - Greater than\n     *  * `gte` - Greater than or equal\n     *  * `lt` - Less than\n     *  * `lte` - Less than or equal\n     *  * `none` - None (no filter)\n     *  * `not_between` - Not between\n     *  * `not_contains` - Not contains\n     *  * `not_empty` - Not empty\n     *  * `neq` - Not equal\n     *\n     * Possible operations on collection of conditions:\n     *  * `conjunction` - [**Conjunction**](https://en.wikipedia.org/wiki/Logical_conjunction) on conditions collection (by default), i.e. for such operation: c1 AND c2 AND c3 AND c4 ... AND cn === TRUE, where c1 ... cn are conditions.\n     *  * `disjunction` - [**Disjunction**](https://en.wikipedia.org/wiki/Logical_disjunction) on conditions collection, i.e. for such operation: `c1 OR c2 OR c3 OR c4 ... OR cn` === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n     *  * `disjunctionWithExtraCondition` - **Disjunction** on first `n - 1`\\* conditions from collection with an extra requirement computed from the last condition, i.e. for such operation: `c1 OR c2 OR c3 OR c4 ... OR cn-1 AND cn` === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n     *\n     * \\* when `n` is collection size; it's used i.e. for one operation introduced from UI (when choosing from filter's drop-down menu two conditions with OR operator between them, mixed with choosing values from the multiple choice select)\n     *\n     * **Note**: Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, use it consequently for a particular column).\n     *\n     * @example\n     * ```js\n     * const container = document.getElementById('example');\n     * const hot = new Handsontable(container, {\n     *   date: getData(),\n     *   filters: true\n     * });\n     *\n     * // access to filters plugin instance\n     * const filtersPlugin = hot.getPlugin('filters');\n     *\n     * // add filter \"Greater than\" 95 to column at index 1\n     * filtersPlugin.addCondition(1, 'gt', [95]);\n     * filtersPlugin.filter();\n     *\n     * // add filter \"By value\" to column at index 1\n     * // in this case all value's that don't match will be filtered.\n     * filtersPlugin.addCondition(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n     * filtersPlugin.filter();\n     *\n     * // add filter \"Begins with\" with value \"de\" AND \"Not contains\" with value \"ing\"\n     * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'conjunction');\n     * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'conjunction');\n     * filtersPlugin.filter();\n     *\n     * // add filter \"Begins with\" with value \"de\" OR \"Not contains\" with value \"ing\"\n     * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'disjunction');\n     * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'disjunction');\n     * filtersPlugin.filter();\n     * ```\n     * @param {Number} column Visual column index.\n     * @param {String} name Condition short name.\n     * @param {Array} args Condition arguments.\n     * @param {String} operationId `id` of operation which is performed on the column\n     */\n\n  }, {\n    key: \"addCondition\",\n    value: function addCondition(column, name, args) {\n      var operationId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : OPERATION_AND;\n      var physicalColumn = this.t.toPhysicalColumn(column);\n      this.conditionCollection.addCondition(physicalColumn, {\n        command: {\n          key: name\n        },\n        args: args\n      }, operationId);\n    }\n    /**\n     * Removes conditions at specified column index.\n     *\n     * @param {Number} column Visual column index.\n     */\n\n  }, {\n    key: \"removeConditions\",\n    value: function removeConditions(column) {\n      var physicalColumn = this.t.toPhysicalColumn(column);\n      this.conditionCollection.removeConditions(physicalColumn);\n    }\n    /**\n     * Clears all conditions previously added to the collection for the specified column index or, if the column index\n     * was not passed, clear the conditions for all columns.\n     *\n     * @param {Number} [column] Visual column index.\n     */\n\n  }, {\n    key: \"clearConditions\",\n    value: function clearConditions(column) {\n      if (column === void 0) {\n        this.conditionCollection.clean();\n      } else {\n        var physicalColumn = this.t.toPhysicalColumn(column);\n        this.conditionCollection.clearConditions(physicalColumn);\n      }\n    }\n    /**\n     * Filters data based on added filter conditions.\n     *\n     * @fires Hooks#beforeFilter\n     * @fires Hooks#afterFilter\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter() {\n      var dataFilter = this._createDataFilter();\n\n      var needToFilter = !this.conditionCollection.isEmpty();\n      var visibleVisualRows = [];\n      var conditions = this.conditionCollection.exportAllConditions();\n      var allowFiltering = this.hot.runHooks('beforeFilter', conditions);\n\n      if (allowFiltering !== false) {\n        if (needToFilter) {\n          var trimmedRows = [];\n          this.trimRowsPlugin.trimmedRows.length = 0;\n          visibleVisualRows = arrayMap(dataFilter.filter(), function (rowData) {\n            return rowData.meta.visualRow;\n          });\n          var visibleVisualRowsAssertion = createArrayAssertion(visibleVisualRows);\n          rangeEach(this.hot.countSourceRows() - 1, function (row) {\n            if (!visibleVisualRowsAssertion(row)) {\n              trimmedRows.push(row);\n            }\n          });\n          this.trimRowsPlugin.trimRows(trimmedRows);\n\n          if (!visibleVisualRows.length) {\n            this.hot.deselectCell();\n          }\n        } else {\n          this.trimRowsPlugin.untrimAll();\n        }\n      }\n\n      this.hot.view.wt.wtOverlays.adjustElementsSize(true);\n      this.hot.render();\n      this.clearColumnSelection();\n      this.hot.runHooks('afterFilter', conditions);\n    }\n    /**\n     * Gets last selected column index.\n     *\n     * @returns {Object|null} Return `null` when column isn't selected otherwise\n     * object containing information about selected column with keys `visualIndex` and `physicalIndex`\n     */\n\n  }, {\n    key: \"getSelectedColumn\",\n    value: function getSelectedColumn() {\n      return this.lastSelectedColumn;\n    }\n    /**\n     * Clears column selection.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"clearColumnSelection\",\n    value: function clearColumnSelection() {\n      var _ref = this.hot.getSelectedLast() || [],\n          _ref2 = _slicedToArray(_ref, 2),\n          row = _ref2[0],\n          col = _ref2[1];\n\n      if (row !== void 0 && col !== void 0) {\n        this.hot.selectCell(row, col);\n      }\n    }\n    /**\n     * Returns handsontable source data with cell meta based on current selection.\n     *\n     * @param {Number} [column] Column index. By default column index accept the value of the selected column.\n     * @returns {Array} Returns array of objects where keys as row index.\n     */\n\n  }, {\n    key: \"getDataMapAtColumn\",\n    value: function getDataMapAtColumn(column) {\n      var _this4 = this;\n\n      var visualIndex = this.t.toVisualColumn(column);\n      var data = [];\n      arrayEach(this.hot.getSourceDataAtCol(visualIndex), function (value, rowIndex) {\n        var _this4$hot$getCellMet = _this4.hot.getCellMeta(rowIndex, visualIndex),\n            row = _this4$hot$getCellMet.row,\n            col = _this4$hot$getCellMet.col,\n            visualCol = _this4$hot$getCellMet.visualCol,\n            visualRow = _this4$hot$getCellMet.visualRow,\n            type = _this4$hot$getCellMet.type,\n            instance = _this4$hot$getCellMet.instance,\n            dateFormat = _this4$hot$getCellMet.dateFormat;\n\n        data.push({\n          meta: {\n            row: row,\n            col: col,\n            visualCol: visualCol,\n            visualRow: visualRow,\n            type: type,\n            instance: instance,\n            dateFormat: dateFormat\n          },\n          value: toEmptyString(value)\n        });\n      });\n      return data;\n    }\n    /**\n     * `afterChange` listener.\n     *\n     * @private\n     * @param {Array} changes Array of changes.\n     */\n\n  }, {\n    key: \"onAfterChange\",\n    value: function onAfterChange(changes) {\n      var _this5 = this;\n\n      if (changes) {\n        arrayEach(changes, function (change) {\n          var _change = _slicedToArray(change, 2),\n              prop = _change[1];\n\n          var columnIndex = _this5.hot.propToCol(prop);\n\n          if (_this5.conditionCollection.hasConditions(columnIndex)) {\n            _this5.updateValueComponentCondition(columnIndex);\n          }\n        });\n      }\n    }\n    /**\n     * Update condition of ValueComponent basing on handled changes\n     *\n     * @private\n     * @param {Number} columnIndex Column index of handled ValueComponent condition\n     */\n\n  }, {\n    key: \"updateValueComponentCondition\",\n    value: function updateValueComponentCondition(columnIndex) {\n      var dataAtCol = this.hot.getDataAtCol(columnIndex);\n      var selectedValues = unifyColumnValues(dataAtCol);\n      this.conditionUpdateObserver.updateStatesAtColumn(columnIndex, selectedValues);\n    }\n    /**\n     * Restores components to their cached state.\n     *\n     * @private\n     * @param {Array} components List of components.\n     */\n\n  }, {\n    key: \"restoreComponents\",\n    value: function restoreComponents(components) {\n      var selectedColumn = this.getSelectedColumn();\n      var physicalIndex = selectedColumn && selectedColumn.physicalIndex;\n      components.forEach(function (component) {\n        if (component.isHidden() === false) {\n          component.restoreState(physicalIndex);\n        }\n      });\n    }\n    /**\n     * After dropdown menu show listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onAfterDropdownMenuShow\",\n    value: function onAfterDropdownMenuShow() {\n      this.restoreComponents([this.components.get('filter_by_condition'), this.components.get('filter_operators'), this.components.get('filter_by_condition2'), this.components.get('filter_by_value')]);\n    }\n    /**\n     * After dropdown menu hide listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onAfterDropdownMenuHide\",\n    value: function onAfterDropdownMenuHide() {\n      this.components.get('filter_by_condition').getSelectElement().closeOptions();\n      this.components.get('filter_by_condition2').getSelectElement().closeOptions();\n    }\n    /**\n     * Before dropdown menu set menu items listener.\n     *\n     * @private\n     * @param {Array} items DropdownMenu items created based on predefined items and settings provided by user.\n     */\n\n  }, {\n    key: \"onBeforeDropdownMenuSetItems\",\n    value: function onBeforeDropdownMenuSetItems(items) {\n      var menuKeys = arrayMap(items, function (item) {\n        return item.key;\n      });\n      this.components.forEach(function (component) {\n        component[menuKeys.indexOf(component.getMenuItemDescriptor().key) === -1 ? 'hide' : 'show']();\n      });\n      this.initHiddenRowsCache();\n    }\n    /**\n     * After dropdown menu default options listener.\n     *\n     * @private\n     * @param {Object} defaultOptions ContextMenu default item options.\n     */\n\n  }, {\n    key: \"onAfterDropdownMenuDefaultOptions\",\n    value: function onAfterDropdownMenuDefaultOptions(defaultOptions) {\n      defaultOptions.items.push({\n        name: SEPARATOR\n      });\n      this.components.forEach(function (component) {\n        defaultOptions.items.push(component.getMenuItemDescriptor());\n      });\n    }\n    /**\n     * Get operation basing on number and type of arguments (where arguments are states of components)\n     *\n     * @param {String} suggestedOperation operation which was chosen by user from UI\n     * @param {Object} byConditionState1 state of first condition component\n     * @param {Object} byConditionState2 state of second condition component\n     * @param {Object} byValueState state of value component\n     * @private\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getOperationBasedOnArguments\",\n    value: function getOperationBasedOnArguments(suggestedOperation, byConditionState1, byConditionState2, byValueState) {\n      var operation = suggestedOperation;\n\n      if (operation === OPERATION_OR && byConditionState1.command.key !== CONDITION_NONE && byConditionState2.command.key !== CONDITION_NONE && byValueState.command.key !== CONDITION_NONE) {\n        operation = OPERATION_OR_THEN_VARIABLE;\n      } else if (byValueState.command.key !== CONDITION_NONE) {\n        if (byConditionState1.command.key === CONDITION_NONE || byConditionState2.command.key === CONDITION_NONE) {\n          operation = OPERATION_AND;\n        }\n      }\n\n      return operation;\n    }\n    /**\n     * On action bar submit listener.\n     *\n     * @private\n     * @param {String} submitType\n     */\n\n  }, {\n    key: \"onActionBarSubmit\",\n    value: function onActionBarSubmit(submitType) {\n      if (submitType === 'accept') {\n        var selectedColumn = this.getSelectedColumn();\n        var physicalIndex = selectedColumn && selectedColumn.physicalIndex;\n        var byConditionState1 = this.components.get('filter_by_condition').getState();\n        var byConditionState2 = this.components.get('filter_by_condition2').getState();\n        var byValueState = this.components.get('filter_by_value').getState();\n        var operation = this.getOperationBasedOnArguments(this.components.get('filter_operators').getActiveOperationId(), byConditionState1, byConditionState2, byValueState);\n        this.conditionUpdateObserver.groupChanges();\n        this.conditionCollection.clearConditions(physicalIndex);\n\n        if (byConditionState1.command.key === CONDITION_NONE && byConditionState2.command.key === CONDITION_NONE && byValueState.command.key === CONDITION_NONE) {\n          this.conditionCollection.removeConditions(physicalIndex);\n        } else {\n          if (byConditionState1.command.key !== CONDITION_NONE) {\n            this.conditionCollection.addCondition(physicalIndex, byConditionState1, operation);\n\n            if (byConditionState2.command.key !== CONDITION_NONE) {\n              this.conditionCollection.addCondition(physicalIndex, byConditionState2, operation);\n            }\n          }\n\n          if (byValueState.command.key !== CONDITION_NONE) {\n            this.conditionCollection.addCondition(physicalIndex, byValueState, operation);\n          }\n        }\n\n        this.conditionUpdateObserver.flush();\n        this.components.get('filter_operators').saveState(physicalIndex);\n        this.components.get('filter_by_value').saveState(physicalIndex);\n        this.saveHiddenRowsCache(physicalIndex);\n        this.trimRowsPlugin.trimmedRows.length = 0;\n        this.filter();\n      }\n\n      this.dropdownMenuPlugin.close();\n    }\n    /**\n     * On component change listener.\n     *\n     * @private\n     * @param {BaseComponent} component Component inheriting BaseComponent\n     * @param {Object} command Menu item object (command).\n     */\n\n  }, {\n    key: \"onComponentChange\",\n    value: function onComponentChange(component, command) {\n      if (component === this.components.get('filter_by_condition')) {\n        if (command.showOperators) {\n          this.showComponents(this.components.get('filter_by_condition2'), this.components.get('filter_operators'));\n        } else {\n          this.hideComponents(this.components.get('filter_by_condition2'), this.components.get('filter_operators'));\n        }\n      }\n\n      if (component.constructor === ConditionComponent && !command.inputsCount) {\n        this.setListeningDropdownMenu();\n      }\n    }\n    /**\n     * On component SelectUI closed listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onSelectUIClosed\",\n    value: function onSelectUIClosed() {\n      this.setListeningDropdownMenu();\n    }\n    /**\n     * Listen to the keyboard input on document body and forward events to instance of Handsontable\n     * created by DropdownMenu plugin\n     *\n     * @private\n     */\n\n  }, {\n    key: \"setListeningDropdownMenu\",\n    value: function setListeningDropdownMenu() {\n      this.dropdownMenuPlugin.setListening();\n    }\n    /**\n     * On after get column header listener.\n     *\n     * @private\n     * @param {Number} col\n     * @param {HTMLTableCellElement} TH\n     */\n\n  }, {\n    key: \"onAfterGetColHeader\",\n    value: function onAfterGetColHeader(col, TH) {\n      var physicalColumn = this.t.toPhysicalColumn(col);\n\n      if (this.enabled && this.conditionCollection.hasConditions(physicalColumn)) {\n        addClass(TH, 'htFiltersActive');\n      } else {\n        removeClass(TH, 'htFiltersActive');\n      }\n    }\n    /**\n     * On table click listener.\n     *\n     * @private\n     * @param {Event} event DOM Event.\n     */\n\n  }, {\n    key: \"onTableClick\",\n    value: function onTableClick(event) {\n      var th = closest(event.target, 'TH');\n\n      if (th) {\n        var visualIndex = this.hot.getCoords(th).col;\n        var physicalIndex = this.t.toPhysicalColumn(visualIndex);\n        this.lastSelectedColumn = {\n          visualIndex: visualIndex,\n          physicalIndex: physicalIndex\n        };\n      }\n    }\n    /**\n     * Destroys the plugin instance.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.enabled) {\n        this.components.forEach(function (component) {\n          component.destroy();\n        });\n        this.conditionCollection.destroy();\n        this.conditionUpdateObserver.destroy();\n        this.hiddenRowsCache.clear();\n        this.trimRowsPlugin.disablePlugin();\n      }\n\n      _get(_getPrototypeOf(Filters.prototype), \"destroy\", this).call(this);\n    }\n    /**\n     * Creates DataFilter instance based on condition collection.\n     *\n     * @private\n     * @param {ConditionCollection} conditionCollection Condition collection object.\n     * @returns {DataFilter}\n     */\n\n  }, {\n    key: \"_createDataFilter\",\n    value: function _createDataFilter() {\n      var _this6 = this;\n\n      var conditionCollection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.conditionCollection;\n      return new DataFilter(conditionCollection, function (column) {\n        return _this6.getDataMapAtColumn(column);\n      });\n    }\n    /**\n     * Updates components basing on conditions state.\n     *\n     * @private\n     * @param {Object} conditionsState\n     */\n\n  }, {\n    key: \"updateComponents\",\n    value: function updateComponents(conditionsState) {\n      if (!this.dropdownMenuPlugin.enabled) {\n        return;\n      }\n\n      var conditions = conditionsState.editedConditionStack.conditions;\n      var column = conditionsState.editedConditionStack.column;\n      var conditionsByValue = conditions.filter(function (condition) {\n        return condition.name === CONDITION_BY_VALUE;\n      });\n      var conditionsWithoutByValue = conditions.filter(function (condition) {\n        return condition.name !== CONDITION_BY_VALUE;\n      });\n      var operationType = this.conditionCollection.columnTypes[column];\n\n      if (conditionsByValue.length === 2 || conditionsWithoutByValue.length === 3) {\n        warn(toSingleLine(_templateObject()));\n      } else {\n        if (conditionsWithoutByValue.length > 0) {\n          this.showComponentForParticularColumn(this.components.get('filter_operators'), column);\n        }\n\n        this.components.get('filter_by_condition').updateState(conditionsWithoutByValue[0], column);\n        this.components.get('filter_by_condition2').updateState(conditionsWithoutByValue[1], column);\n        this.components.get('filter_by_value').updateState(conditionsState);\n        this.components.get('filter_operators').updateState(operationType, column);\n      }\n    }\n    /**\n     * Shows component for particular column.\n     *\n     * @private\n     * @param {BaseComponent} component `BaseComponent` element or it derivatives.\n     * @param {Number} column Physical column index.\n     */\n\n  }, {\n    key: \"showComponentForParticularColumn\",\n    value: function showComponentForParticularColumn(component, column) {\n      if (!this.hiddenRowsCache.has(column)) {\n        this.hiddenRowsCache.set(column, []);\n      } else {\n        var indexes = this.getIndexesOfComponents(component);\n        this.removeIndexesFromHiddenRowsCache(column, indexes);\n      }\n    }\n    /**\n     * Removes specific rows from `hiddenRows` cache for particular column.\n     *\n     * @private\n     * @param {Number} column Physical column index.\n     * @param {Array} indexes Physical indexes of rows which will be removed from `hiddenRows` cache\n     */\n\n  }, {\n    key: \"removeIndexesFromHiddenRowsCache\",\n    value: function removeIndexesFromHiddenRowsCache(column, indexes) {\n      var hiddenRowsForColumn = this.hiddenRowsCache.get(column);\n      arrayEach(indexes, function (index) {\n        if (hiddenRowsForColumn.includes(index)) {\n          hiddenRowsForColumn.splice(hiddenRowsForColumn.indexOf(index), 1);\n        }\n      });\n    }\n    /**\n     * Returns indexes of passed components inside list of `dropdownMenu` items.\n     *\n     * @private\n     * @param {...BaseComponent} components List of components.\n     * @returns {Array}\n     */\n\n  }, {\n    key: \"getIndexesOfComponents\",\n    value: function getIndexesOfComponents() {\n      var menu = this.dropdownMenuPlugin.menu;\n      var indexes = [];\n\n      for (var _len = arguments.length, components = new Array(_len), _key = 0; _key < _len; _key++) {\n        components[_key] = arguments[_key];\n      }\n\n      arrayEach(components, function (component) {\n        arrayEach(menu.menuItems, function (item, index) {\n          if (item.key === component.getMenuItemDescriptor().key) {\n            indexes.push(index);\n          }\n        });\n      });\n      return indexes;\n    }\n    /**\n     * Changes visibility of component.\n     *\n     * @private\n     * @param {Boolean} visible Determine if components should be visible.\n     * @param {...BaseComponent} components List of components.\n     */\n\n  }, {\n    key: \"changeComponentsVisibility\",\n    value: function changeComponentsVisibility() {\n      var visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var menu = this.dropdownMenuPlugin.menu;\n      var hotMenu = menu.hotMenu;\n      var hiddenRows = hotMenu.getPlugin('hiddenRows');\n\n      for (var _len2 = arguments.length, components = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        components[_key2 - 1] = arguments[_key2];\n      }\n\n      var indexes = this.getIndexesOfComponents.apply(this, components);\n\n      if (visible) {\n        hiddenRows.showRows(indexes);\n      } else {\n        hiddenRows.hideRows(indexes);\n      }\n\n      hotMenu.render();\n    }\n    /**\n     * Initializes `hiddenRows` cache.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"initHiddenRowsCache\",\n    value: function initHiddenRowsCache() {\n      var _this7 = this;\n\n      this.dropdownMenuPlugin.menu.addLocalHook('afterOpen', function () {\n        var index = _this7.lastSelectedColumn.physicalIndex;\n\n        if (!_this7.hiddenRowsCache.has(index)) {\n          _this7.hiddenRowsCache.set(index, _this7.getIndexesOfComponents(_this7.components.get('filter_operators'), _this7.components.get('filter_by_condition2')));\n        }\n\n        _this7.dropdownMenuPlugin.menu.hotMenu.updateSettings({\n          hiddenRows: {\n            rows: _this7.hiddenRowsCache.get(index)\n          }\n        });\n      });\n    }\n    /**\n     * Saves `hiddenRows` cache for particular row.\n     *\n     * @private\n     * @param rowIndex Physical row index\n     */\n\n  }, {\n    key: \"saveHiddenRowsCache\",\n    value: function saveHiddenRowsCache(rowIndex) {\n      this.hiddenRowsCache.set(rowIndex, this.dropdownMenuPlugin.menu.hotMenu.getPlugin('hiddenRows').hiddenRows);\n    }\n    /**\n     * Hides components of filters `dropdownMenu`.\n     *\n     * @private\n     * @param {...BaseComponent} components List of components.\n     */\n\n  }, {\n    key: \"hideComponents\",\n    value: function hideComponents() {\n      for (var _len3 = arguments.length, components = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        components[_key3] = arguments[_key3];\n      }\n\n      this.changeComponentsVisibility.apply(this, [false].concat(components));\n    }\n    /**\n     * Shows components of filters `dropdownMenu`.\n     *\n     * @private\n     * @param {...BaseComponent} components List of components.\n     */\n\n  }, {\n    key: \"showComponents\",\n    value: function showComponents() {\n      for (var _len4 = arguments.length, components = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        components[_key4] = arguments[_key4];\n      }\n\n      this.changeComponentsVisibility.apply(this, [true].concat(components));\n    }\n  }]);\n\n  return Filters;\n}(BasePlugin);\n\nregisterPlugin('filters', Filters);\nexport default Filters;","map":{"version":3,"sources":["C:/Users/pjk14/Desktop/Gradely/gradely-react/node_modules/handsontable/es/plugins/filters/filters.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_templateObject","data","_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","length","err","Array","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","BasePlugin","arrayEach","arrayMap","toSingleLine","warn","rangeEach","EventManager","addClass","removeClass","closest","registerPlugin","SEPARATOR","constants","ConditionComponent","OperatorsComponent","ValueComponent","ActionBarComponent","ConditionCollection","DataFilter","ConditionUpdateObserver","createArrayAssertion","toEmptyString","unifyColumnValues","CONDITION_NONE","CONDITION_BY_VALUE","OPERATION_AND","OPERATION_OR","OPERATION_OR_THEN_VARIABLE","Filters","_BasePlugin","hotInstance","_this","eventManager","trimRowsPlugin","dropdownMenuPlugin","conditionCollection","conditionUpdateObserver","components","Map","lastSelectedColumn","hiddenRowsCache","hot","addHook","col","TH","onAfterGetColHeader","isEnabled","getSettings","filters","enablePlugin","_this2","enabled","getPlugin","dropdownSettings","dropdownMenu","menuContainer","uiContainer","rootDocument","body","addConfirmationHooks","component","addLocalHook","onActionBarSubmit","command","onComponentChange","filterByConditionLabel","concat","getTranslatedPhrase","FILTERS_DIVS_FILTER_BY_CONDITION","filterValueLabel","FILTERS_DIVS_FILTER_BY_VALUE","conditionComponent","id","name","addSeparator","onSelectUIClosed","set","_conditionComponent","column","getDataMapAtColumn","conditionState","updateComponents","forEach","show","registerEvents","items","onBeforeDropdownMenuSetItems","defaultOptions","onAfterDropdownMenuDefaultOptions","onAfterDropdownMenuShow","onAfterDropdownMenuHide","changes","onAfterChange","trimRows","disablePlugin","_this3","addEventListener","rootElement","event","onTableClick","menu","clearLocalHooks","hide","clean","untrimAll","addCondition","args","operationId","arguments","physicalColumn","t","toPhysicalColumn","removeConditions","clearConditions","filter","dataFilter","_createDataFilter","needToFilter","isEmpty","visibleVisualRows","conditions","exportAllConditions","allowFiltering","runHooks","trimmedRows","rowData","meta","visualRow","visibleVisualRowsAssertion","countSourceRows","row","deselectCell","view","wt","wtOverlays","adjustElementsSize","render","clearColumnSelection","getSelectedColumn","_ref","getSelectedLast","_ref2","selectCell","_this4","visualIndex","toVisualColumn","getSourceDataAtCol","rowIndex","_this4$hot$getCellMet","getCellMeta","visualCol","type","dateFormat","_this5","change","_change","prop","columnIndex","propToCol","hasConditions","updateValueComponentCondition","dataAtCol","getDataAtCol","selectedValues","updateStatesAtColumn","restoreComponents","selectedColumn","physicalIndex","isHidden","restoreState","getSelectElement","closeOptions","menuKeys","item","indexOf","getMenuItemDescriptor","initHiddenRowsCache","getOperationBasedOnArguments","suggestedOperation","byConditionState1","byConditionState2","byValueState","operation","submitType","getState","getActiveOperationId","groupChanges","flush","saveState","saveHiddenRowsCache","close","showOperators","showComponents","hideComponents","inputsCount","setListeningDropdownMenu","setListening","th","getCoords","destroy","clear","_this6","conditionsState","editedConditionStack","conditionsByValue","condition","conditionsWithoutByValue","operationType","columnTypes","showComponentForParticularColumn","updateState","has","indexes","getIndexesOfComponents","removeIndexesFromHiddenRowsCache","hiddenRowsForColumn","index","includes","splice","_len","_key","menuItems","changeComponentsVisibility","visible","hotMenu","hiddenRows","_len2","_key2","apply","showRows","hideRows","_this7","updateSettings","rows","_len3","_key3","_len4","_key4"],"mappings":"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","sourcesContent":["import \"core-js/modules/es.symbol\";\nimport \"core-js/modules/es.symbol.description\";\nimport \"core-js/modules/es.symbol.iterator\";\nimport \"core-js/modules/es.array.concat\";\nimport \"core-js/modules/es.array.filter\";\nimport \"core-js/modules/es.array.for-each\";\nimport \"core-js/modules/es.array.includes\";\nimport \"core-js/modules/es.array.index-of\";\nimport \"core-js/modules/es.array.iterator\";\nimport \"core-js/modules/es.array.slice\";\nimport \"core-js/modules/es.array.splice\";\nimport \"core-js/modules/es.function.name\";\nimport \"core-js/modules/es.map\";\nimport \"core-js/modules/es.object.freeze\";\nimport \"core-js/modules/es.object.get-own-property-descriptor\";\nimport \"core-js/modules/es.object.get-prototype-of\";\nimport \"core-js/modules/es.object.set-prototype-of\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.reflect.get\";\nimport \"core-js/modules/es.regexp.to-string\";\nimport \"core-js/modules/es.string.includes\";\nimport \"core-js/modules/es.string.iterator\";\nimport \"core-js/modules/web.dom-collections.for-each\";\nimport \"core-js/modules/web.dom-collections.iterator\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"The filter conditions have been applied properly, but couldn\\u2019t be displayed visually. \\n        The overall amount of conditions exceed the capability of the dropdown menu. \\n        For more details see the documentation.\"], [\"The filter conditions have been applied properly, but couldn\\u2019t be displayed visually.\\\\x20\\n        The overall amount of conditions exceed the capability of the dropdown menu.\\\\x20\\n        For more details see the documentation.\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport BasePlugin from '../_base';\nimport { arrayEach, arrayMap } from '../../helpers/array';\nimport { toSingleLine } from '../../helpers/templateLiteralTag';\nimport { warn } from '../../helpers/console';\nimport { rangeEach } from '../../helpers/number';\nimport EventManager from '../../eventManager';\nimport { addClass, removeClass, closest } from '../../helpers/dom/element';\nimport { registerPlugin } from '../../plugins';\nimport { SEPARATOR } from '../contextMenu/predefinedItems';\nimport * as constants from '../../i18n/constants';\nimport ConditionComponent from './component/condition';\nimport OperatorsComponent from './component/operators';\nimport ValueComponent from './component/value';\nimport ActionBarComponent from './component/actionBar';\nimport ConditionCollection from './conditionCollection';\nimport DataFilter from './dataFilter';\nimport ConditionUpdateObserver from './conditionUpdateObserver';\nimport { createArrayAssertion, toEmptyString, unifyColumnValues } from './utils';\nimport { CONDITION_NONE, CONDITION_BY_VALUE, OPERATION_AND, OPERATION_OR, OPERATION_OR_THEN_VARIABLE } from './constants';\n\n/**\n * @plugin Filters\n * @dependencies DropdownMenu TrimRows HiddenRows\n *\n * @description\n * The plugin allows filtering the table data either by the built-in component or with the API.\n *\n * See [the filtering demo](https://docs.handsontable.com/pro/demo-filtering.html) for examples.\n *\n * @example\n * ```\n * const container = document.getElementById('example');\n * const hot = new Handsontable(container, {\n *   data: getData(),\n *   colHeaders: true,\n *   rowHeaders: true,\n *   dropdownMenu: true,\n *   filters: true\n * });\n * ```\n */\nvar Filters =\n/*#__PURE__*/\nfunction (_BasePlugin) {\n  _inherits(Filters, _BasePlugin);\n\n  function Filters(hotInstance) {\n    var _this;\n\n    _classCallCheck(this, Filters);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Filters).call(this, hotInstance));\n    /**\n     * Instance of {@link EventManager}.\n     *\n     * @private\n     * @type {EventManager}\n     */\n\n    _this.eventManager = new EventManager(_assertThisInitialized(_this));\n    /**\n     * Instance of {@link TrimRows}.\n     *\n     * @private\n     * @type {TrimRows}\n     */\n\n    _this.trimRowsPlugin = null;\n    /**\n     * Instance of {@link DropdownMenu}.\n     *\n     * @private\n     * @type {DropdownMenu}\n     */\n\n    _this.dropdownMenuPlugin = null;\n    /**\n     * Instance of {@link ConditionCollection}.\n     *\n     * @private\n     * @type {ConditionCollection}\n     */\n\n    _this.conditionCollection = null;\n    /**\n     * Instance of {@link ConditionUpdateObserver}.\n     *\n     * @private\n     * @type {ConditionUpdateObserver}\n     */\n\n    _this.conditionUpdateObserver = null;\n    /**\n     * Map, where key is component identifier and value represent `BaseComponent` element or it derivatives.\n     *\n     * @private\n     * @type {Map}\n     */\n\n    _this.components = new Map([['filter_by_condition', null], ['filter_operators', null], ['filter_by_condition2', null], ['filter_by_value', null], ['filter_action_bar', null]]);\n    /**\n     * Object containing information about last selected column physical and visual index for added filter conditions.\n     *\n     * @private\n     * @type {Object}\n     * @default null\n     */\n\n    _this.lastSelectedColumn = null;\n    /**\n     * Hidden menu rows indexed by physical column index\n     *\n     * @private\n     * @type {Map}\n     */\n\n    _this.hiddenRowsCache = new Map(); // One listener for the enable/disable functionality\n\n    _this.hot.addHook('afterGetColHeader', function (col, TH) {\n      return _this.onAfterGetColHeader(col, TH);\n    });\n\n    return _this;\n  }\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` than the {@link Filters#enablePlugin} method is called.\n   *\n   * @returns {Boolean}\n   */\n\n\n  _createClass(Filters, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      /* eslint-disable no-unneeded-ternary */\n      return this.hot.getSettings().filters ? true : false;\n    }\n    /**\n     * Enables the plugin functionality for this Handsontable instance.\n     */\n\n  }, {\n    key: \"enablePlugin\",\n    value: function enablePlugin() {\n      var _this2 = this;\n\n      if (this.enabled) {\n        return;\n      }\n\n      this.trimRowsPlugin = this.hot.getPlugin('trimRows');\n      this.dropdownMenuPlugin = this.hot.getPlugin('dropdownMenu');\n      var dropdownSettings = this.hot.getSettings().dropdownMenu;\n      var menuContainer = dropdownSettings && dropdownSettings.uiContainer || this.hot.rootDocument.body;\n\n      var addConfirmationHooks = function addConfirmationHooks(component) {\n        component.addLocalHook('accept', function () {\n          return _this2.onActionBarSubmit('accept');\n        });\n        component.addLocalHook('cancel', function () {\n          return _this2.onActionBarSubmit('cancel');\n        });\n        component.addLocalHook('change', function (command) {\n          return _this2.onComponentChange(component, command);\n        });\n        return component;\n      };\n\n      var filterByConditionLabel = function filterByConditionLabel() {\n        return \"\".concat(_this2.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_CONDITION), \":\");\n      };\n\n      var filterValueLabel = function filterValueLabel() {\n        return \"\".concat(_this2.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_VALUE), \":\");\n      };\n\n      if (!this.components.get('filter_by_condition')) {\n        var conditionComponent = new ConditionComponent(this.hot, {\n          id: 'filter_by_condition',\n          name: filterByConditionLabel,\n          addSeparator: false,\n          menuContainer: menuContainer\n        });\n        conditionComponent.addLocalHook('afterClose', function () {\n          return _this2.onSelectUIClosed();\n        });\n        this.components.set('filter_by_condition', addConfirmationHooks(conditionComponent));\n      }\n\n      if (!this.components.get('filter_operators')) {\n        this.components.set('filter_operators', new OperatorsComponent(this.hot, {\n          id: 'filter_operators',\n          name: 'Operators'\n        }));\n      }\n\n      if (!this.components.get('filter_by_condition2')) {\n        var _conditionComponent = new ConditionComponent(this.hot, {\n          id: 'filter_by_condition2',\n          name: '',\n          addSeparator: true,\n          menuContainer: menuContainer\n        });\n\n        _conditionComponent.addLocalHook('afterClose', function () {\n          return _this2.onSelectUIClosed();\n        });\n\n        this.components.set('filter_by_condition2', addConfirmationHooks(_conditionComponent));\n      }\n\n      if (!this.components.get('filter_by_value')) {\n        this.components.set('filter_by_value', addConfirmationHooks(new ValueComponent(this.hot, {\n          id: 'filter_by_value',\n          name: filterValueLabel\n        })));\n      }\n\n      if (!this.components.get('filter_action_bar')) {\n        this.components.set('filter_action_bar', addConfirmationHooks(new ActionBarComponent(this.hot, {\n          id: 'filter_action_bar',\n          name: 'Action bar'\n        })));\n      }\n\n      if (!this.conditionCollection) {\n        this.conditionCollection = new ConditionCollection();\n      }\n\n      if (!this.conditionUpdateObserver) {\n        this.conditionUpdateObserver = new ConditionUpdateObserver(this.conditionCollection, function (column) {\n          return _this2.getDataMapAtColumn(column);\n        });\n        this.conditionUpdateObserver.addLocalHook('update', function (conditionState) {\n          return _this2.updateComponents(conditionState);\n        });\n      }\n\n      this.components.forEach(function (component) {\n        component.show();\n      });\n      this.registerEvents();\n      this.addHook('beforeDropdownMenuSetItems', function (items) {\n        return _this2.onBeforeDropdownMenuSetItems(items);\n      });\n      this.addHook('afterDropdownMenuDefaultOptions', function (defaultOptions) {\n        return _this2.onAfterDropdownMenuDefaultOptions(defaultOptions);\n      });\n      this.addHook('afterDropdownMenuShow', function () {\n        return _this2.onAfterDropdownMenuShow();\n      });\n      this.addHook('afterDropdownMenuHide', function () {\n        return _this2.onAfterDropdownMenuHide();\n      });\n      this.addHook('afterChange', function (changes) {\n        return _this2.onAfterChange(changes);\n      }); // force to enable dependent plugins\n\n      this.hot.getSettings().trimRows = true;\n      this.trimRowsPlugin.enablePlugin(); // Temp. solution (extending menu items bug in contextMenu/dropdownMenu)\n\n      if (this.hot.getSettings().dropdownMenu) {\n        this.dropdownMenuPlugin.disablePlugin();\n        this.dropdownMenuPlugin.enablePlugin();\n      }\n\n      _get(_getPrototypeOf(Filters.prototype), \"enablePlugin\", this).call(this);\n    }\n    /**\n     * Registers the DOM listeners.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this3 = this;\n\n      this.eventManager.addEventListener(this.hot.rootElement, 'click', function (event) {\n        return _this3.onTableClick(event);\n      });\n    }\n    /**\n     * Disables the plugin functionality for this Handsontable instance.\n     */\n\n  }, {\n    key: \"disablePlugin\",\n    value: function disablePlugin() {\n      if (this.enabled) {\n        if (this.dropdownMenuPlugin.enabled) {\n          this.dropdownMenuPlugin.menu.clearLocalHooks();\n        }\n\n        this.components.forEach(function (component) {\n          component.hide();\n        });\n        this.conditionCollection.clean();\n        this.trimRowsPlugin.untrimAll();\n      }\n\n      _get(_getPrototypeOf(Filters.prototype), \"disablePlugin\", this).call(this);\n    }\n    /**\n     * @description\n     * Adds condition to the conditions collection at specified column index.\n     *\n     * Possible predefined conditions:\n     *  * `begins_with` - Begins with\n     *  * `between` - Between\n     *  * `by_value` - By value\n     *  * `contains` - Contains\n     *  * `empty` - Empty\n     *  * `ends_with` - Ends with\n     *  * `eq` - Equal\n     *  * `gt` - Greater than\n     *  * `gte` - Greater than or equal\n     *  * `lt` - Less than\n     *  * `lte` - Less than or equal\n     *  * `none` - None (no filter)\n     *  * `not_between` - Not between\n     *  * `not_contains` - Not contains\n     *  * `not_empty` - Not empty\n     *  * `neq` - Not equal\n     *\n     * Possible operations on collection of conditions:\n     *  * `conjunction` - [**Conjunction**](https://en.wikipedia.org/wiki/Logical_conjunction) on conditions collection (by default), i.e. for such operation: c1 AND c2 AND c3 AND c4 ... AND cn === TRUE, where c1 ... cn are conditions.\n     *  * `disjunction` - [**Disjunction**](https://en.wikipedia.org/wiki/Logical_disjunction) on conditions collection, i.e. for such operation: `c1 OR c2 OR c3 OR c4 ... OR cn` === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n     *  * `disjunctionWithExtraCondition` - **Disjunction** on first `n - 1`\\* conditions from collection with an extra requirement computed from the last condition, i.e. for such operation: `c1 OR c2 OR c3 OR c4 ... OR cn-1 AND cn` === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n     *\n     * \\* when `n` is collection size; it's used i.e. for one operation introduced from UI (when choosing from filter's drop-down menu two conditions with OR operator between them, mixed with choosing values from the multiple choice select)\n     *\n     * **Note**: Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, use it consequently for a particular column).\n     *\n     * @example\n     * ```js\n     * const container = document.getElementById('example');\n     * const hot = new Handsontable(container, {\n     *   date: getData(),\n     *   filters: true\n     * });\n     *\n     * // access to filters plugin instance\n     * const filtersPlugin = hot.getPlugin('filters');\n     *\n     * // add filter \"Greater than\" 95 to column at index 1\n     * filtersPlugin.addCondition(1, 'gt', [95]);\n     * filtersPlugin.filter();\n     *\n     * // add filter \"By value\" to column at index 1\n     * // in this case all value's that don't match will be filtered.\n     * filtersPlugin.addCondition(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n     * filtersPlugin.filter();\n     *\n     * // add filter \"Begins with\" with value \"de\" AND \"Not contains\" with value \"ing\"\n     * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'conjunction');\n     * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'conjunction');\n     * filtersPlugin.filter();\n     *\n     * // add filter \"Begins with\" with value \"de\" OR \"Not contains\" with value \"ing\"\n     * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'disjunction');\n     * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'disjunction');\n     * filtersPlugin.filter();\n     * ```\n     * @param {Number} column Visual column index.\n     * @param {String} name Condition short name.\n     * @param {Array} args Condition arguments.\n     * @param {String} operationId `id` of operation which is performed on the column\n     */\n\n  }, {\n    key: \"addCondition\",\n    value: function addCondition(column, name, args) {\n      var operationId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : OPERATION_AND;\n      var physicalColumn = this.t.toPhysicalColumn(column);\n      this.conditionCollection.addCondition(physicalColumn, {\n        command: {\n          key: name\n        },\n        args: args\n      }, operationId);\n    }\n    /**\n     * Removes conditions at specified column index.\n     *\n     * @param {Number} column Visual column index.\n     */\n\n  }, {\n    key: \"removeConditions\",\n    value: function removeConditions(column) {\n      var physicalColumn = this.t.toPhysicalColumn(column);\n      this.conditionCollection.removeConditions(physicalColumn);\n    }\n    /**\n     * Clears all conditions previously added to the collection for the specified column index or, if the column index\n     * was not passed, clear the conditions for all columns.\n     *\n     * @param {Number} [column] Visual column index.\n     */\n\n  }, {\n    key: \"clearConditions\",\n    value: function clearConditions(column) {\n      if (column === void 0) {\n        this.conditionCollection.clean();\n      } else {\n        var physicalColumn = this.t.toPhysicalColumn(column);\n        this.conditionCollection.clearConditions(physicalColumn);\n      }\n    }\n    /**\n     * Filters data based on added filter conditions.\n     *\n     * @fires Hooks#beforeFilter\n     * @fires Hooks#afterFilter\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter() {\n      var dataFilter = this._createDataFilter();\n\n      var needToFilter = !this.conditionCollection.isEmpty();\n      var visibleVisualRows = [];\n      var conditions = this.conditionCollection.exportAllConditions();\n      var allowFiltering = this.hot.runHooks('beforeFilter', conditions);\n\n      if (allowFiltering !== false) {\n        if (needToFilter) {\n          var trimmedRows = [];\n          this.trimRowsPlugin.trimmedRows.length = 0;\n          visibleVisualRows = arrayMap(dataFilter.filter(), function (rowData) {\n            return rowData.meta.visualRow;\n          });\n          var visibleVisualRowsAssertion = createArrayAssertion(visibleVisualRows);\n          rangeEach(this.hot.countSourceRows() - 1, function (row) {\n            if (!visibleVisualRowsAssertion(row)) {\n              trimmedRows.push(row);\n            }\n          });\n          this.trimRowsPlugin.trimRows(trimmedRows);\n\n          if (!visibleVisualRows.length) {\n            this.hot.deselectCell();\n          }\n        } else {\n          this.trimRowsPlugin.untrimAll();\n        }\n      }\n\n      this.hot.view.wt.wtOverlays.adjustElementsSize(true);\n      this.hot.render();\n      this.clearColumnSelection();\n      this.hot.runHooks('afterFilter', conditions);\n    }\n    /**\n     * Gets last selected column index.\n     *\n     * @returns {Object|null} Return `null` when column isn't selected otherwise\n     * object containing information about selected column with keys `visualIndex` and `physicalIndex`\n     */\n\n  }, {\n    key: \"getSelectedColumn\",\n    value: function getSelectedColumn() {\n      return this.lastSelectedColumn;\n    }\n    /**\n     * Clears column selection.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"clearColumnSelection\",\n    value: function clearColumnSelection() {\n      var _ref = this.hot.getSelectedLast() || [],\n          _ref2 = _slicedToArray(_ref, 2),\n          row = _ref2[0],\n          col = _ref2[1];\n\n      if (row !== void 0 && col !== void 0) {\n        this.hot.selectCell(row, col);\n      }\n    }\n    /**\n     * Returns handsontable source data with cell meta based on current selection.\n     *\n     * @param {Number} [column] Column index. By default column index accept the value of the selected column.\n     * @returns {Array} Returns array of objects where keys as row index.\n     */\n\n  }, {\n    key: \"getDataMapAtColumn\",\n    value: function getDataMapAtColumn(column) {\n      var _this4 = this;\n\n      var visualIndex = this.t.toVisualColumn(column);\n      var data = [];\n      arrayEach(this.hot.getSourceDataAtCol(visualIndex), function (value, rowIndex) {\n        var _this4$hot$getCellMet = _this4.hot.getCellMeta(rowIndex, visualIndex),\n            row = _this4$hot$getCellMet.row,\n            col = _this4$hot$getCellMet.col,\n            visualCol = _this4$hot$getCellMet.visualCol,\n            visualRow = _this4$hot$getCellMet.visualRow,\n            type = _this4$hot$getCellMet.type,\n            instance = _this4$hot$getCellMet.instance,\n            dateFormat = _this4$hot$getCellMet.dateFormat;\n\n        data.push({\n          meta: {\n            row: row,\n            col: col,\n            visualCol: visualCol,\n            visualRow: visualRow,\n            type: type,\n            instance: instance,\n            dateFormat: dateFormat\n          },\n          value: toEmptyString(value)\n        });\n      });\n      return data;\n    }\n    /**\n     * `afterChange` listener.\n     *\n     * @private\n     * @param {Array} changes Array of changes.\n     */\n\n  }, {\n    key: \"onAfterChange\",\n    value: function onAfterChange(changes) {\n      var _this5 = this;\n\n      if (changes) {\n        arrayEach(changes, function (change) {\n          var _change = _slicedToArray(change, 2),\n              prop = _change[1];\n\n          var columnIndex = _this5.hot.propToCol(prop);\n\n          if (_this5.conditionCollection.hasConditions(columnIndex)) {\n            _this5.updateValueComponentCondition(columnIndex);\n          }\n        });\n      }\n    }\n    /**\n     * Update condition of ValueComponent basing on handled changes\n     *\n     * @private\n     * @param {Number} columnIndex Column index of handled ValueComponent condition\n     */\n\n  }, {\n    key: \"updateValueComponentCondition\",\n    value: function updateValueComponentCondition(columnIndex) {\n      var dataAtCol = this.hot.getDataAtCol(columnIndex);\n      var selectedValues = unifyColumnValues(dataAtCol);\n      this.conditionUpdateObserver.updateStatesAtColumn(columnIndex, selectedValues);\n    }\n    /**\n     * Restores components to their cached state.\n     *\n     * @private\n     * @param {Array} components List of components.\n     */\n\n  }, {\n    key: \"restoreComponents\",\n    value: function restoreComponents(components) {\n      var selectedColumn = this.getSelectedColumn();\n      var physicalIndex = selectedColumn && selectedColumn.physicalIndex;\n      components.forEach(function (component) {\n        if (component.isHidden() === false) {\n          component.restoreState(physicalIndex);\n        }\n      });\n    }\n    /**\n     * After dropdown menu show listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onAfterDropdownMenuShow\",\n    value: function onAfterDropdownMenuShow() {\n      this.restoreComponents([this.components.get('filter_by_condition'), this.components.get('filter_operators'), this.components.get('filter_by_condition2'), this.components.get('filter_by_value')]);\n    }\n    /**\n     * After dropdown menu hide listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onAfterDropdownMenuHide\",\n    value: function onAfterDropdownMenuHide() {\n      this.components.get('filter_by_condition').getSelectElement().closeOptions();\n      this.components.get('filter_by_condition2').getSelectElement().closeOptions();\n    }\n    /**\n     * Before dropdown menu set menu items listener.\n     *\n     * @private\n     * @param {Array} items DropdownMenu items created based on predefined items and settings provided by user.\n     */\n\n  }, {\n    key: \"onBeforeDropdownMenuSetItems\",\n    value: function onBeforeDropdownMenuSetItems(items) {\n      var menuKeys = arrayMap(items, function (item) {\n        return item.key;\n      });\n      this.components.forEach(function (component) {\n        component[menuKeys.indexOf(component.getMenuItemDescriptor().key) === -1 ? 'hide' : 'show']();\n      });\n      this.initHiddenRowsCache();\n    }\n    /**\n     * After dropdown menu default options listener.\n     *\n     * @private\n     * @param {Object} defaultOptions ContextMenu default item options.\n     */\n\n  }, {\n    key: \"onAfterDropdownMenuDefaultOptions\",\n    value: function onAfterDropdownMenuDefaultOptions(defaultOptions) {\n      defaultOptions.items.push({\n        name: SEPARATOR\n      });\n      this.components.forEach(function (component) {\n        defaultOptions.items.push(component.getMenuItemDescriptor());\n      });\n    }\n    /**\n     * Get operation basing on number and type of arguments (where arguments are states of components)\n     *\n     * @param {String} suggestedOperation operation which was chosen by user from UI\n     * @param {Object} byConditionState1 state of first condition component\n     * @param {Object} byConditionState2 state of second condition component\n     * @param {Object} byValueState state of value component\n     * @private\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getOperationBasedOnArguments\",\n    value: function getOperationBasedOnArguments(suggestedOperation, byConditionState1, byConditionState2, byValueState) {\n      var operation = suggestedOperation;\n\n      if (operation === OPERATION_OR && byConditionState1.command.key !== CONDITION_NONE && byConditionState2.command.key !== CONDITION_NONE && byValueState.command.key !== CONDITION_NONE) {\n        operation = OPERATION_OR_THEN_VARIABLE;\n      } else if (byValueState.command.key !== CONDITION_NONE) {\n        if (byConditionState1.command.key === CONDITION_NONE || byConditionState2.command.key === CONDITION_NONE) {\n          operation = OPERATION_AND;\n        }\n      }\n\n      return operation;\n    }\n    /**\n     * On action bar submit listener.\n     *\n     * @private\n     * @param {String} submitType\n     */\n\n  }, {\n    key: \"onActionBarSubmit\",\n    value: function onActionBarSubmit(submitType) {\n      if (submitType === 'accept') {\n        var selectedColumn = this.getSelectedColumn();\n        var physicalIndex = selectedColumn && selectedColumn.physicalIndex;\n        var byConditionState1 = this.components.get('filter_by_condition').getState();\n        var byConditionState2 = this.components.get('filter_by_condition2').getState();\n        var byValueState = this.components.get('filter_by_value').getState();\n        var operation = this.getOperationBasedOnArguments(this.components.get('filter_operators').getActiveOperationId(), byConditionState1, byConditionState2, byValueState);\n        this.conditionUpdateObserver.groupChanges();\n        this.conditionCollection.clearConditions(physicalIndex);\n\n        if (byConditionState1.command.key === CONDITION_NONE && byConditionState2.command.key === CONDITION_NONE && byValueState.command.key === CONDITION_NONE) {\n          this.conditionCollection.removeConditions(physicalIndex);\n        } else {\n          if (byConditionState1.command.key !== CONDITION_NONE) {\n            this.conditionCollection.addCondition(physicalIndex, byConditionState1, operation);\n\n            if (byConditionState2.command.key !== CONDITION_NONE) {\n              this.conditionCollection.addCondition(physicalIndex, byConditionState2, operation);\n            }\n          }\n\n          if (byValueState.command.key !== CONDITION_NONE) {\n            this.conditionCollection.addCondition(physicalIndex, byValueState, operation);\n          }\n        }\n\n        this.conditionUpdateObserver.flush();\n        this.components.get('filter_operators').saveState(physicalIndex);\n        this.components.get('filter_by_value').saveState(physicalIndex);\n        this.saveHiddenRowsCache(physicalIndex);\n        this.trimRowsPlugin.trimmedRows.length = 0;\n        this.filter();\n      }\n\n      this.dropdownMenuPlugin.close();\n    }\n    /**\n     * On component change listener.\n     *\n     * @private\n     * @param {BaseComponent} component Component inheriting BaseComponent\n     * @param {Object} command Menu item object (command).\n     */\n\n  }, {\n    key: \"onComponentChange\",\n    value: function onComponentChange(component, command) {\n      if (component === this.components.get('filter_by_condition')) {\n        if (command.showOperators) {\n          this.showComponents(this.components.get('filter_by_condition2'), this.components.get('filter_operators'));\n        } else {\n          this.hideComponents(this.components.get('filter_by_condition2'), this.components.get('filter_operators'));\n        }\n      }\n\n      if (component.constructor === ConditionComponent && !command.inputsCount) {\n        this.setListeningDropdownMenu();\n      }\n    }\n    /**\n     * On component SelectUI closed listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onSelectUIClosed\",\n    value: function onSelectUIClosed() {\n      this.setListeningDropdownMenu();\n    }\n    /**\n     * Listen to the keyboard input on document body and forward events to instance of Handsontable\n     * created by DropdownMenu plugin\n     *\n     * @private\n     */\n\n  }, {\n    key: \"setListeningDropdownMenu\",\n    value: function setListeningDropdownMenu() {\n      this.dropdownMenuPlugin.setListening();\n    }\n    /**\n     * On after get column header listener.\n     *\n     * @private\n     * @param {Number} col\n     * @param {HTMLTableCellElement} TH\n     */\n\n  }, {\n    key: \"onAfterGetColHeader\",\n    value: function onAfterGetColHeader(col, TH) {\n      var physicalColumn = this.t.toPhysicalColumn(col);\n\n      if (this.enabled && this.conditionCollection.hasConditions(physicalColumn)) {\n        addClass(TH, 'htFiltersActive');\n      } else {\n        removeClass(TH, 'htFiltersActive');\n      }\n    }\n    /**\n     * On table click listener.\n     *\n     * @private\n     * @param {Event} event DOM Event.\n     */\n\n  }, {\n    key: \"onTableClick\",\n    value: function onTableClick(event) {\n      var th = closest(event.target, 'TH');\n\n      if (th) {\n        var visualIndex = this.hot.getCoords(th).col;\n        var physicalIndex = this.t.toPhysicalColumn(visualIndex);\n        this.lastSelectedColumn = {\n          visualIndex: visualIndex,\n          physicalIndex: physicalIndex\n        };\n      }\n    }\n    /**\n     * Destroys the plugin instance.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.enabled) {\n        this.components.forEach(function (component) {\n          component.destroy();\n        });\n        this.conditionCollection.destroy();\n        this.conditionUpdateObserver.destroy();\n        this.hiddenRowsCache.clear();\n        this.trimRowsPlugin.disablePlugin();\n      }\n\n      _get(_getPrototypeOf(Filters.prototype), \"destroy\", this).call(this);\n    }\n    /**\n     * Creates DataFilter instance based on condition collection.\n     *\n     * @private\n     * @param {ConditionCollection} conditionCollection Condition collection object.\n     * @returns {DataFilter}\n     */\n\n  }, {\n    key: \"_createDataFilter\",\n    value: function _createDataFilter() {\n      var _this6 = this;\n\n      var conditionCollection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.conditionCollection;\n      return new DataFilter(conditionCollection, function (column) {\n        return _this6.getDataMapAtColumn(column);\n      });\n    }\n    /**\n     * Updates components basing on conditions state.\n     *\n     * @private\n     * @param {Object} conditionsState\n     */\n\n  }, {\n    key: \"updateComponents\",\n    value: function updateComponents(conditionsState) {\n      if (!this.dropdownMenuPlugin.enabled) {\n        return;\n      }\n\n      var conditions = conditionsState.editedConditionStack.conditions;\n      var column = conditionsState.editedConditionStack.column;\n      var conditionsByValue = conditions.filter(function (condition) {\n        return condition.name === CONDITION_BY_VALUE;\n      });\n      var conditionsWithoutByValue = conditions.filter(function (condition) {\n        return condition.name !== CONDITION_BY_VALUE;\n      });\n      var operationType = this.conditionCollection.columnTypes[column];\n\n      if (conditionsByValue.length === 2 || conditionsWithoutByValue.length === 3) {\n        warn(toSingleLine(_templateObject()));\n      } else {\n        if (conditionsWithoutByValue.length > 0) {\n          this.showComponentForParticularColumn(this.components.get('filter_operators'), column);\n        }\n\n        this.components.get('filter_by_condition').updateState(conditionsWithoutByValue[0], column);\n        this.components.get('filter_by_condition2').updateState(conditionsWithoutByValue[1], column);\n        this.components.get('filter_by_value').updateState(conditionsState);\n        this.components.get('filter_operators').updateState(operationType, column);\n      }\n    }\n    /**\n     * Shows component for particular column.\n     *\n     * @private\n     * @param {BaseComponent} component `BaseComponent` element or it derivatives.\n     * @param {Number} column Physical column index.\n     */\n\n  }, {\n    key: \"showComponentForParticularColumn\",\n    value: function showComponentForParticularColumn(component, column) {\n      if (!this.hiddenRowsCache.has(column)) {\n        this.hiddenRowsCache.set(column, []);\n      } else {\n        var indexes = this.getIndexesOfComponents(component);\n        this.removeIndexesFromHiddenRowsCache(column, indexes);\n      }\n    }\n    /**\n     * Removes specific rows from `hiddenRows` cache for particular column.\n     *\n     * @private\n     * @param {Number} column Physical column index.\n     * @param {Array} indexes Physical indexes of rows which will be removed from `hiddenRows` cache\n     */\n\n  }, {\n    key: \"removeIndexesFromHiddenRowsCache\",\n    value: function removeIndexesFromHiddenRowsCache(column, indexes) {\n      var hiddenRowsForColumn = this.hiddenRowsCache.get(column);\n      arrayEach(indexes, function (index) {\n        if (hiddenRowsForColumn.includes(index)) {\n          hiddenRowsForColumn.splice(hiddenRowsForColumn.indexOf(index), 1);\n        }\n      });\n    }\n    /**\n     * Returns indexes of passed components inside list of `dropdownMenu` items.\n     *\n     * @private\n     * @param {...BaseComponent} components List of components.\n     * @returns {Array}\n     */\n\n  }, {\n    key: \"getIndexesOfComponents\",\n    value: function getIndexesOfComponents() {\n      var menu = this.dropdownMenuPlugin.menu;\n      var indexes = [];\n\n      for (var _len = arguments.length, components = new Array(_len), _key = 0; _key < _len; _key++) {\n        components[_key] = arguments[_key];\n      }\n\n      arrayEach(components, function (component) {\n        arrayEach(menu.menuItems, function (item, index) {\n          if (item.key === component.getMenuItemDescriptor().key) {\n            indexes.push(index);\n          }\n        });\n      });\n      return indexes;\n    }\n    /**\n     * Changes visibility of component.\n     *\n     * @private\n     * @param {Boolean} visible Determine if components should be visible.\n     * @param {...BaseComponent} components List of components.\n     */\n\n  }, {\n    key: \"changeComponentsVisibility\",\n    value: function changeComponentsVisibility() {\n      var visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var menu = this.dropdownMenuPlugin.menu;\n      var hotMenu = menu.hotMenu;\n      var hiddenRows = hotMenu.getPlugin('hiddenRows');\n\n      for (var _len2 = arguments.length, components = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        components[_key2 - 1] = arguments[_key2];\n      }\n\n      var indexes = this.getIndexesOfComponents.apply(this, components);\n\n      if (visible) {\n        hiddenRows.showRows(indexes);\n      } else {\n        hiddenRows.hideRows(indexes);\n      }\n\n      hotMenu.render();\n    }\n    /**\n     * Initializes `hiddenRows` cache.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"initHiddenRowsCache\",\n    value: function initHiddenRowsCache() {\n      var _this7 = this;\n\n      this.dropdownMenuPlugin.menu.addLocalHook('afterOpen', function () {\n        var index = _this7.lastSelectedColumn.physicalIndex;\n\n        if (!_this7.hiddenRowsCache.has(index)) {\n          _this7.hiddenRowsCache.set(index, _this7.getIndexesOfComponents(_this7.components.get('filter_operators'), _this7.components.get('filter_by_condition2')));\n        }\n\n        _this7.dropdownMenuPlugin.menu.hotMenu.updateSettings({\n          hiddenRows: {\n            rows: _this7.hiddenRowsCache.get(index)\n          }\n        });\n      });\n    }\n    /**\n     * Saves `hiddenRows` cache for particular row.\n     *\n     * @private\n     * @param rowIndex Physical row index\n     */\n\n  }, {\n    key: \"saveHiddenRowsCache\",\n    value: function saveHiddenRowsCache(rowIndex) {\n      this.hiddenRowsCache.set(rowIndex, this.dropdownMenuPlugin.menu.hotMenu.getPlugin('hiddenRows').hiddenRows);\n    }\n    /**\n     * Hides components of filters `dropdownMenu`.\n     *\n     * @private\n     * @param {...BaseComponent} components List of components.\n     */\n\n  }, {\n    key: \"hideComponents\",\n    value: function hideComponents() {\n      for (var _len3 = arguments.length, components = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        components[_key3] = arguments[_key3];\n      }\n\n      this.changeComponentsVisibility.apply(this, [false].concat(components));\n    }\n    /**\n     * Shows components of filters `dropdownMenu`.\n     *\n     * @private\n     * @param {...BaseComponent} components List of components.\n     */\n\n  }, {\n    key: \"showComponents\",\n    value: function showComponents() {\n      for (var _len4 = arguments.length, components = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        components[_key4] = arguments[_key4];\n      }\n\n      this.changeComponentsVisibility.apply(this, [true].concat(components));\n    }\n  }]);\n\n  return Filters;\n}(BasePlugin);\n\nregisterPlugin('filters', Filters);\nexport default Filters;"]},"metadata":{},"sourceType":"module"}